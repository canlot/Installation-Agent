<Window x:Class="Installation_Agent.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        xmlns:local="clr-namespace:Installation_Agent"
        xmlns:models="clr-namespace:Installation.Models.Executables;assembly=Installation.Models"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="1000" Closing="Window_Closing" Loaded="Window_Loaded">
    <Window.Resources>
        <local:StatusStateToColorConverter x:Key="StatusStateToColorConverter" />
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Grid Grid.Column="0" Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ui:AutoSuggestBox PlaceholderText="Search" QueryIcon="Find" Margin="12">
                
            </ui:AutoSuggestBox>
            <ui:NavigationView Grid.Row="1" PaneDisplayMode="Left" ui:IsBackButtonVisible="Collapsed" ui:IsPaneToggleButtonVisible="False">
                <ui:NavigationView.MenuItems>
                    <ui:NavigationViewItem Content="Apps"/>
                    <ui:NavigationViewItem Content="Scripts"/>
                </ui:NavigationView.MenuItems>
            </ui:NavigationView>
        </Grid>

        <ListBox Grid.Column="1" Grid.Row="0" x:Name="ListBoxJobs">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment"
                        Value="Stretch"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.Resources>
                <DataTemplate DataType="{x:Type models:ScriptExecutable}">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="1*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <Ellipse Fill="{Binding StatusState, Converter={StaticResource StatusStateToColorConverter}}" Width="10" Height="10" Margin="5"/>
                            <Label FontSize="20" Margin="5">
                                <Label.Content>
                                    <AccessText>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="Name"/>
                                            <Binding Path="Version"/>
                                        </MultiBinding>
                                    </AccessText>
                                </Label.Content>
                            </Label>
                            <ui:ProgressRing Name = "ProgressRing" Margin="5" IsActive="{Binding CurrentlyRunning, Mode=TwoWay }">
                            </ui:ProgressRing>
                        </StackPanel>
                        <ui:CommandBar Grid.Row="1" HorizontalAlignment="Left">
                            <ui:AppBarButton Label="Ausführen" Click="ButtonRunScript_Click">>
                                <ui:AppBarButton.Icon>
                                    <ui:BitmapIcon UriSource="/play_512px.png"/>
                                </ui:AppBarButton.Icon>
                            </ui:AppBarButton>
                        </ui:CommandBar>
                    </Grid>
                </DataTemplate>
                <DataTemplate DataType="{x:Type models:ApplicationExecutable}">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="1*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <Ellipse Fill="{Binding StatusState, Converter={StaticResource StatusStateToColorConverter}}" Width="10" Height="10" Margin="5"/>
                            <Label FontSize="20" Margin="5">
                                <Label.Content>
                                    <AccessText>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="Name"/>
                                            <Binding Path="Version"/>
                                        </MultiBinding>
                                    </AccessText>
                                </Label.Content>
                            </Label>
                            <ui:ProgressRing Name = "ProgressRing" Margin="5" IsActive="{Binding CurrentlyRunning, Mode=TwoWay }">
                            </ui:ProgressRing>
                        </StackPanel>
                        <ui:CommandBar Grid.Row="1" HorizontalAlignment="Left">
                            <ui:AppBarButton Label="Installieren" Click="ButtonInstallApplication_Click">
                                <ui:AppBarButton.Icon>
                                    <ui:BitmapIcon UriSource="/installing_512px.png"/>
                                </ui:AppBarButton.Icon>
                            </ui:AppBarButton>
                            <ui:AppBarButton Label="Neuinstallieren" Click="ButtonReinstallApplication_Click">
                                <ui:AppBarButton.Icon>
                                    <ui:BitmapIcon UriSource="/reboot_512px.png"/>
                                </ui:AppBarButton.Icon>
                            </ui:AppBarButton>

                            <ui:AppBarButton Label="Deinstallieren" Click="ButtonUninstallApplication_Click">
                                <ui:AppBarButton.Icon>
                                    <ui:BitmapIcon UriSource="/Remove_512px.png"/>
                                </ui:AppBarButton.Icon>
                            </ui:AppBarButton>
                        </ui:CommandBar>
                    </Grid>
                </DataTemplate>
            </ListBox.Resources>
            
        </ListBox>
    </Grid>
</Window>
